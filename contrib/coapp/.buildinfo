@import default_tools;

#define {
    ProjectName = "zlib";
    ProjectFiles : {
		zlib.vcxproj
    }; 
};

default {
    (PlatformToolsets, Architectures, ReleaseOrDebug, Linkage, "cdecl,stdcall" ) => {
        .MsBuildEx {
            MaxThreads = $(MaxThreads);
            LoadEnvironmentFromTargets = VC_${0}_${1};
            StartMessage = @"Environment vc_${0}_${1} -- ${2}  ${3} ";
            Properties:  {
				PlatformToolset=${0};
				Platform=${1};
				Configuration=${2};
				UsesConfigurationType=${3};
				CallingConvention=${4}
			};
			
            Projects=${ProjectFiles};
        };
    };
    
    // wait for all threaded tasks to finish.
    .WaitForTasks { };
};

