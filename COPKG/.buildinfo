/* target information */

#product-info  {
	product-name: "zlib";
	version: "1.2.5";
	original-source-location: "http://zlib.net/zlib125.zip";
	original-source-website: "http://zlib.net";
	license: "zlib license -- http://zlib.net/zlib_license.html";
	packager: "garrett serack <garretts@microsoft.com>";
}

x86 {
    compiler: vc10-x86;
    
    targets: { 
		"contrib\vstudio\vc10\x86\MiniUnzipRelease\miniunz.exe",
		"contrib\vstudio\vc10\x86\MiniZipRelease\minizip.exe",
		"contrib\vstudio\vc10\x86\TestZlibDllRelease\testzlib.exe",
		"contrib\vstudio\vc10\x86\TestZlibRelease\testzlib.exe",
		"contrib\vstudio\vc10\x86\ZlibDllRelease\zlibwapi.dll",
		"contrib\vstudio\vc10\x86\ZlibDllRelease\zlibwapi.lib",
		"contrib\vstudio\vc10\x86\ZlibStatRelease\zlibstat.lib"
	};
	
    build-command:@"
		pushd contrib\masmx86\
		call bld_ml32.bat
        popd 
		msbuild /p:Platform=win32 /p:Configuration=Release contrib\vstudio\vc10\zlibvc.sln
	";
    
    clean-command:@"
       erase contrib\masmx86\inffas32.lst  > nul 2> nul
       erase contrib\masmx86\inffas32.obj  > nul 2> nul
       erase contrib\masmx86\match686.lst  > nul 2> nul
       erase contrib\masmx86\match686.obj  > nul 2> nul
       rmdir /s /q contrib\vstudio\vc10\x86  > nul 2> nul
    ";
};

x64 {
    compiler: vc10-x64;

	targets: { 
		"contrib\vstudio\vc10\x64\MiniUnzipRelease\miniunz.exe",
		"contrib\vstudio\vc10\x64\Release\minizip.exe",
		"contrib\vstudio\vc10\x64\TestZlibDllRelease\testzlib.exe",
		"contrib\vstudio\vc10\x64\TestZlibRelease\testzlib.exe",
		"contrib\vstudio\vc10\x64\ZlibDllRelease\zlibwapi.dll",
		"contrib\vstudio\vc10\x64\ZlibDllRelease\zlibwapi.lib",
		"contrib\vstudio\vc10\x64\ZlibStatRelease\zlibstat.lib"
	};
	
    build-command:@"
        pushd contrib\masmx64\
        call bld_ml64.bat
        popd 
        msbuild /p:Platform=x64 /p:Configuration=Release contrib\vstudio\vc10\zlibvc.sln
    ";
    clean-command:@"
       erase contrib\masmx64\inffasx64.lst  > nul 2> nul
       erase contrib\masmx64\inffasx64.obj  > nul 2> nul
       erase contrib\masmx64\gvmat64.lst  > nul 2> nul
       erase contrib\masmx64\gvmat64.obj  > nul 2> nul
       rmdir /s /q contrib\vstudio\vc10\x64  > nul 2> nul
    ";
};